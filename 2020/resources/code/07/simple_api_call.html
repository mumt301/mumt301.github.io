<!DOCTYPE html>
<html>
  <head>
      <title>Forms and APIs</title>
      <link rel="stylesheet" href="https://minicss.org/flavorFiles/mini-default.css">
      <!-- <link rel="stylesheet" href="https://minicss.org/flavorFiles/mini-dark.css"> -->
      <meta name="viewport" content="width=device-width, initial-scale=1"> 
  </head>

  <body>
    <h1>JavaScript, HTML forms, and simple API call.<small>Doing more interesting things with data entered in forms</small></h1>
    <div>
        <h2></h2>
        <p>Can we use data from forms to retrieve information from the Internet?</p>

        <p>SURE!</p>
        <p>We can create a call to a web service API for retrieving data about some resource that the service may have.</p>
        <p> We need to deal, though, with creating the proper call and with parsing the response of the service.</p>

        <p>Typically, API calls follow the form</p>
        <div class="container">
            <code>http://www.domain.com:1234/path/to/resource?a=b&x=y</code>
        </div>
        
        <p>How can we retrieve the weather for a specific city?</p>
        <p>Search the web for "Weather API"</p>

        <div class="container">
            <a href="http://openweathermap.org/api" target="new">OpenWeather API!</a>
        </div>


        <p> According to the OpenWeather API, the call for calling the current weather data for one location by city name is: </p>

        <div class="container">
            <a href="http://api.openweathermap.org/data/2.5/weather?q=Montreal" target="new">http://api.openweathermap.org/data/2.5/weather?q=Montreal</a>
        </div>
        

        <p> We missed the API key!</p>
        <div class="container">
                <a href="http://api.openweathermap.org/data/2.5/weather?q=Montreal&APPID=84333ed1e3b5de0a85ebd078cd8f713c" target="new">http://api.openweathermap.org/data/2.5/weather?q=Montreal&APPID=84333ed1e3b5de0a85ebd078cd8f713c</a>
        </div>
        
        <p>OpenWeather returns JSON by default, but it can also return other formats (XML and HTML). How? Check their documentation!</p>

        <p>XML</p>
        <div class="container">
            <a href="http://api.openweathermap.org/data/2.5/weather?q=Montreal&APPID=84333ed1e3b5de0a85ebd078cd8f713c&mode=xml" target="new">http://api.openweathermap.org/data/2.5/weather?q=Montreal&APPID=84333ed1e3b5de0a85ebd078cd8f713c&mode=xml</a>
        </div>
        

        <p>HTML</p>
        <div class="container">
            <a href="http://api.openweathermap.org/data/2.5/weather?q=Montreal&APPID=84333ed1e3b5de0a85ebd078cd8f713c&mode=html" target="new">http://api.openweathermap.org/data/2.5/weather?q=Montreal&APPID=84333ed1e3b5de0a85ebd078cd8f713c&mode=html</a>
        </div>
  
        <h3 id="Ex2">In-class Exercise # 2 <small>Using the OpenWeather API in our own site</small></h3>
        <p>This builds on top of <a href="./index.html#Ex1">Exercise # 1</a>.</p><p>You are going to provide the current weather for a user-entered city. Any city! For doing that, you are going to create a form and ask the visitor of your site for the name of a city (which was done in exercise # 1).</p>
        <p>Then, you are going to use the OpenWeather API to retrieve the information, JS to parse the information, and HTML to render the results.</p>

        <h4>Steps</h4>
        <ol>
            <li>Create an API query
                <br><small>How to create an HTTP request without a browser? HttpGet!</small>
            </li>
            <li>Parse the results</li>
            <li>Render the data in the placeholder element</li>
        </ol>
        <h4><a href="07Ex2_SolutionA_async-false.html">Solution A</a></h4>
        <h4><a href="07Ex2_SolutionB-statusCheck.html">Solution B</a></h4>
      </div>
  </body>
</html>
